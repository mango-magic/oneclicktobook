/ (root)
â”œâ”€ apps
â”‚ â”œâ”€ api
â”‚ â”‚ â”œâ”€ src
â”‚ â”‚ â”‚ â”œâ”€ index.ts
â”‚ â”‚ â”‚ â”œâ”€ config.ts
â”‚ â”‚ â”‚ â”œâ”€ db.ts
â”‚ â”‚ â”‚ â”œâ”€ auth
â”‚ â”‚ â”‚ â”‚ â”œâ”€ google.ts
â”‚ â”‚ â”‚ â”‚ â””â”€ microsoft.ts
â”‚ â”‚ â”‚ â”œâ”€ routes
â”‚ â”‚ â”‚ â”‚ â”œâ”€ links.ts
â”‚ â”‚ â”‚ â”‚ â”œâ”€ availability.ts
â”‚ â”‚ â”‚ â”‚ â”œâ”€ book.ts
â”‚ â”‚ â”‚ â”‚ â””â”€ webhooks.ts
â”‚ â”‚ â”‚ â”œâ”€ services
â”‚ â”‚ â”‚ â”‚ â”œâ”€ freebusy.ts
â”‚ â”‚ â”‚ â”‚ â”œâ”€ slots.ts
â”‚ â”‚ â”‚ â”‚ â””â”€ booking.ts
â”‚ â”‚ â”‚ â”œâ”€ utils
â”‚ â”‚ â”‚ â”‚ â”œâ”€ jwt.ts
â”‚ â”‚ â”‚ â”‚ â”œâ”€ time.ts
â”‚ â”‚ â”‚ â”‚ â””â”€ ics.ts
â”‚ â”‚ â”‚ â””â”€ types.ts
â”‚ â”‚ â”œâ”€ prisma
â”‚ â”‚ â”‚ â””â”€ schema.prisma
â”‚ â”‚ â”œâ”€ package.json
â”‚ â”‚ â”œâ”€ tsconfig.json
â”‚ â”‚ â””â”€ .env.example
â”‚ â””â”€ web
â”‚ â”œâ”€ public
â”‚ â”‚ â””â”€ index.html
â”‚ â”œâ”€ src
â”‚ â”‚ â””â”€ main.ts
â”‚ â”œâ”€ package.json
â”‚ â””â”€ tsconfig.json
â”œâ”€ package.json
â”œâ”€ pnpm-workspace.yaml
â””â”€ README.md


---

## âš™ï¸ Environment Setup

Copy `apps/api/.env.example` â†’ `apps/api/.env`:


App

PORT=4000
APP_BASE_URL=https://oneclicktobook.me
WEB_BASE_URL=https://oneclicktobook.me

JWT

JWT_SECRET=change-me

Database

DATABASE_URL=postgresql://user:pass@localhost:5432/oneclicktobook

Redis

REDIS_URL=redis://localhost:6379

Google OAuth

GOOGLE_CLIENT_ID=...
GOOGLE_CLIENT_SECRET=...
GOOGLE_REDIRECT_URI=https://oneclicktobook.me/auth/google/callback

Microsoft OAuth

MS_CLIENT_ID=...
MS_CLIENT_SECRET=...
MS_TENANT_ID=common
MS_REDIRECT_URI=https://oneclicktobook.me/auth/microsoft/callback

Conferencing (placeholder)

VIDEO_PROVIDER=meet # meet|teams|zoom|none


---

## ğŸ”‘ OAuth Scopes

**Google (minimum needed):**
- `https://www.googleapis.com/auth/calendar.readonly`
- `https://www.googleapis.com/auth/calendar.events`

**Microsoft Graph:**
- `Calendars.Read`
- `Calendars.Read.Shared`
- `Calendars.ReadWrite`

---

## ğŸ—„ Database (Prisma)

Tables:
- `User` â€” organizer or invitee
- `Link` â€” meeting template & settings
- `Booking` â€” confirmed meetings
- `Token` â€” encrypted OAuth tokens
- `AvailabilityCache` â€” short-lived cache

Run:
```bash
pnpm i
pnpm -C apps/api prisma:generate
pnpm -C apps/api prisma:migrate

ğŸƒ Dev Run

API:

pnpm -C apps/api dev


Web:

pnpm -C apps/web dev

ğŸ“¡ Core Endpoints
POST /links           # create a booking link
POST /availability    # get overlapping slots
POST /book            # confirm a booking
POST /reschedule      # change a booking
POST /webhooks/google
POST /webhooks/microsoft

ğŸ”’ Security & Privacy

Only busy intervals are stored â€” no event titles/details

Tokens encrypted at rest

JWT link tokens short-lived & signed

Webhooks validated and idempotent

ğŸ“Œ Notes

Apple/iCloud users can paste their private iCal URL

Video conferencing integration is pluggable

ğŸ“œ License

MIT


---

Do you want me to go ahead and prepare **File 2** (`apps/api/src/index.ts`) so the repo is immediately runnable? Thatâ€™s where the Express server and routes will be wired up.
